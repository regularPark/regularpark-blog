---
title: 'Webpack build'
date: 2023-07-30
thumbnail:
categories: FE,ìš°ì•„í•œí…Œí¬ì½”ìŠ¤,ë ˆë²¨3,webpack
---

ìš°í…Œì½” ë ˆë²¨3ê°€ ì‹œì‘ëœ ì§€ë„ ë²Œì¨ 6ì£¼ì°¨ì— ì ‘ì–´ë“¤ê±´ë§Œ, ì´ì œì•¼ 2ì£¼ì°¨ì— í–ˆë˜ ì›¹íŒ© ë¹Œë“œì— ëŒ€í•œ ê¸€ì„ ì“°ë„¤ìš”.

í”„ë¡œì íŠ¸ ë¹Œë“œë¼ê³ ëŠ” CRAë¡œë°–ì— ëª»í–ˆë˜ ì €ì´ê¸° ë•Œë¬¸ì— ì›¹íŒ©ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë¹Œë“œë¥¼ í•´ì•¼ í•˜ë‹¤ëŠ” ì²­ì²œë²½ë ¥ ê°™ì€ ì†Œë¦¬ë¥¼ ë“£ê³  í˜¸ë‹¤ë‹¥ ê³µë¶€ë¥¼ í•´ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤.

ì£¼ì €ë¦¬ ì£¼ì €ë¦¬ ë– ë“¤ì–´ëŒ”ì§€ë§Œ, ê²°êµ­ ì´ ê¸€ì„ ì“°ëŠ” ëª©ì ì€ ìˆœì „íˆ ì œê°€ ë‹¤ì‹œ ë³´ê¸° ìœ„í•¨ì´ê¸° ë•Œë¬¸ì—, ì›¹íŒ© ë¹Œë“œì— ëŒ€í•œ ë­”ê°€ í”„ë¡œí˜ì…”ë„í•˜ê³  ë”¥í•œ ê¸€ì„ ì›í•˜ì…¨ë˜ ë¶„ì€ ê·€ì¤‘í•œ ì‹œê°„ì„ ë‹¤ë¥¸ ê³³ì— ì“°ì…¨ìœ¼ë©´ ì¢‹ê² ë„¤ìš”ğŸ˜„

ì €í¬ ì¡°ëŠ” íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ yarnì„ ì„ íƒí–ˆëŠ”ë°ìš”.

NPMì´ íŒ¨í‚¤ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ë™ì•ˆ yarnì€ ë³‘ë ¬ ì„¤ì¹˜ë¥¼ ìˆ˜í–‰í•˜ì—¬ ë” ë‚˜ì€ ì†ë„ì™€ ì„±ëŠ¥ì„ ì œê³µí•œë‹¤ê³  í•©ë‹ˆë‹¤.

[https://www.knowledgehut.com/blog/web-development/yarn-vs-npm](https://www.knowledgehut.com/blog/web-development/yarn-vs-npm)

### 1.Â  í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

```bash
# í”„ë¡œì íŠ¸ ì´ˆê¸°í™” & package.json ìƒì„±
yarn init -y

# dependenciesì— react, react-dom ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€
yarn add react react-dom

# '-D' í”„ë¡œì íŠ¸ ë°°í¬ì—ëŠ” í•„ìš”ì—†ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ devDependenciesì— ì„¤ì¹˜
yarn add -D typescript @types/react @types/react-dom

# tsconfig.json ìƒì„±
yarn tsc --init
```

ì´ì™¸ì—ë„ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.

### 2\. ì›¹íŒ© ê´€ë ¨ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜

```bash
# webpack: ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ë¡œì„œ, ì—¬ëŸ¬ íŒŒì¼ë“¤ì„ í•˜ë‚˜ë¡œ ë²ˆë“¤ë§í•˜ê³  ìµœì í™”í•˜ëŠ” ë„êµ¬
# webpack-cli: ì›¹íŒ©ì„ ì»¤ë§¨ë“œ ë¼ì¸ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë„êµ¬
yarn add -D webpack webpack-cli


# html-webpack-plugin: ë¹Œë“œ ì‹œ HTML íŒŒì¼ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³  ë²ˆë“¤ë§ëœ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì—°ê²°í•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸
# webpack-dev-server: ê°œë°œ ì„œë²„ ì‹¤í–‰ ì¤‘ ì½”ë“œ ë³€ê²½ ì‹œ ë¹Œë“œ ìë™ ìˆ˜í–‰ ë° ë¸Œë¼ìš°ì € ìë™ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ê°œë°œ í™”ë©´ í™•ì¸
# ts-loader: ì›¹íŒ©ì—ì„œ TypeScript ì†ŒìŠ¤ ì½”ë“œë¥¼ JavaScriptë¡œ ë³€í™˜í•˜ëŠ” ì—­í•  ìˆ˜í–‰.
yarn add -D html-webpack-plugin webpack-dev-server ts-loader
```

### 3\. webpack config íŒŒì¼ì„ ì •ì˜

**webpack.common.js**

```js
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const webpack = require('webpack');
const dotenv = require('dotenv');
dotenv.config();

module.exports = {
  mode: 'development',
  entry: './src/index.tsx',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
    clean: true,
    /* react-router-dom outletì„ ì ìš©í•  ë•Œ,
    children pageë“¤ì´ ë¼ìš°íŒ… ë˜ì§€ ì•ŠëŠ” ë¬¸ì œë¥¼ publicPath:'/'ë¡œ ì‘ì„±í•˜ì—¬ í•´ê²°í•¨. */
    publicPath: '/',
  },
  resolve: {
    extensions: ['.ts', '.tsx', '.js', '.jsx'],
  },
  module: {
    rules: [
      {
        test: /\.(js|ts|tsx)$/i,
        exclude: /node_modules/,
        use: {
          loader: 'ts-loader',
          options: {
            compilerOptions: { noEmit: false },
          },
        },
      },
      {
        test: /\.(jpg|png|gif|svg)$/,
        type: 'asset/resource',
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './public/index.html',
    }),
    // webpack ë¹Œë“œ ì‹œ í™˜ê²½ë³€ìˆ˜ íŒŒì¼(.env)ì„ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš° ì•„ë˜ ì½”ë“œì˜ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
    new webpack.DefinePlugin({
      'process.env': JSON.stringify(process.env),
    }),
  ],
  devtool: 'inline-source-map',
};
```

**webpack.dev.js**

```js
const { merge } = require('webpack-merge');
const common = require('./webpack.common.js');

module.exports = merge(common, {
  mode: 'development',
  devtool: 'eval',
  devServer: {
    historyApiFallback: true,
    port: 3000,
    hot: true,
  },
});
```

- ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë¹ ë¥¸ ë¹Œë“œì™€ ë””ë²„ê¹…ì„ ìœ„í•´ development ëª¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
- devtoolì˜ 'eval' ì†ŒìŠ¤ ë§µì„ ì‚¬ìš©í•˜ë©´ ë¹ ë¥¸ ë¹Œë“œë¥¼ í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
- devServerì˜ historyApiFallback: trueëŠ” ë¼ìš°íŒ… ì§€ì›ì„ ìœ„í•œ ì˜µì…˜ì…ë‹ˆë‹¤. port:3000ëŠ” ê°œë°œ ì„œë²„ê°€ ë™ì‘í•  í¬íŠ¸, hot: trueëŠ” í•« ëª¨ë“ˆ ë¦¬ë¡œë”©(Hot Module Replacement)ì„ í™œì„±í™”í•©ë‹ˆë‹¤.

**webpack.prod.js**

```js
const { merge } = require('webpack-merge');
const common = require('./webpack.common.js');

module.exports = merge(common, {
  mode: 'production',
  devtool: 'hidden-source-map',
});
```

- production ëª¨ë“œì—ì„œëŠ” ì½”ë“œ ìµœì í™”ë¥¼ ì ìš©í•˜ì—¬ ë°°í¬ìš© ë²ˆë“¤ì„ ìƒì„±í•©ë‹ˆë‹¤.
- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” devtoolì˜ 'hidden-source-map'ì„ í†µí•´ ë””ë²„ê¹… ì •ë³´ë¥¼ ê°ì¶”ë©´ì„œ, ì†ŒìŠ¤ ë§µì„ ì‚¬ìš©í•˜ì—¬ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ì›ë³¸ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì €í¬ íŒ€ì€ webpack.config.jsë¥¼ ì´ë ‡ê²Œ ì„¸ ê°€ì§€ë¡œ ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

ê³µí†µë˜ëŠ” ë¶€ë¶„ì€ common, ê°œë°œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì€ dev, ì‹¤ì œ í”„ë¡œë•ì…˜ ë°°í¬ì—ëŠ” prodë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•˜ì—¬ ê°œë°œ í™˜ê²½ê³¼ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ê°ê° ìµœì í™”ëœ ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ ì›¹íŒ© ë¹Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëìŠµë‹ˆë‹¤.

### 4\. script

```json
"scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "dev": "webpack-dev-server --config webpack.dev.js --open --hot",
    "build": "webpack --config webpack.prod.js",
    "start": "webpack --config webpack.dev.js"
  },
```

ë§ˆì§€ë§‰ìœ¼ë¡œ package.jsonì˜ script ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì—¬ ì§€ê¸ˆê¹Œì§€ ì‘ì„±í•œ ì›¹íŒ© ì„¤ì •ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤!ğŸ˜„

ì´ìƒ ì €í¬ íŒ€ì˜ ì›¹íŒ© ë¹Œë“œ ê³¼ì •ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ğŸ™‡â€â™‚ï¸
